# Домашнее задание к занятию "Pacemaker" - `Хамов Олег`

### Задание 1

Pacemaker — мозг и по совместительству менеджер ресурсов кластера. Его главная
задача — достижение максимальной доступности ресурсов, которыми он управляет, и
защита их от сбоев. Во время работы кластера могут происходить различные события –
сбои, переход узла в сервисный режим и тд.

Основные функции кардиостимулятора:

1) Отслеживание и восстановление сбоев узлов и уровней обслуживания;
2) Нет необходимости общего хранилища данных;
3) Для Pacemaker ресурсы — это скрипты, написанные на разных языках, которыми можно управлять, главное, чтобы они умели выполнять 3 действия: start, stop, monitor и делиться некоторой метаинформацией;
4) Поддержка функции узла STONITH для обеспечения целостности данных кластера и предотвращения разделения мозга кластера;
5) Поддержка больших или малых кластеров;
6) Поддержка механизма кворума;
7) Поддержка практически любой конфигурации с резервированием;
8) Автоматическая синхронизация файлов конфигурации каждого узла;
9) Вы можете установить ограничения, такие как порядок, размещение и запрет на размещение в кластере;
10) Поддержка расширенных типов услуг, таких как:
Функция клонирования, то есть те службы, которые должны запускаться на нескольких узлах, могут быть реализованы с помощью функции клонирования, а функция клонирования запускает одну и ту же службу на нескольких
Функция с несколькими состояниями, то есть те службы, которые должны запускаться в нескольких состояниях, могут быть реализованы с помощью нескольких состояний. Среди служб кластера высокой доступности многие службы будут работать с разными состояниями высокой доступности. Режим, например: активный / активный режим или активный / пассивный режим и т.д. Эти службы могут переключаться между активным и резервным (пассивным);
11) Иметь унифицированный инструмент управления кластером со скриптами.

### Задание 2

Corosync —программный продукт, позволяющий реализовать кластер серверов. Его основное назначение — знать и передавать состояние всех участников кластера.

В основе работы заложены следующие функции:

1) Отслеживание состояния приложений.
2) Оповещение приложений о смене активной ноды кластера.
3) Отправка одинаковых сообщений процессам на всех узлах кластера.
4) Предоставление доступа к базе данных с конфигурацией и статистикой, а также отправка уведомлений о ее изменениях.

Проект предоставляет четыре набора API для языка Си:

«Закрытая группа процессов» (англ. Closed Process Group — CPG) — модель взаимодействия, реализующая виртуальную синхронизацию[en], которая гарантирует, что процессы на узлах кластера получат одинаковые сообщения в одинаковом порядке.

«Простой менеджер доступности» (англ. Simple Availability Manager — SAM), отслеживающий состояния приложений и позволяющий их перезапускать после сбоя.

«База данных конфигурации» (англ. Configuration database — confdb) в оперативной памяти, позволяющая получать конфигурацию и статистику Corosync, менять конфигурацию и получать уведомления об её изменениях.

«Кворум[en]» (англ. quorum) — система, оповещающая приложения о том, достигнут кворум (необходимое минимальное количество активных узлов кластера) или нет.

Программное обеспечение предназначено для работы в сетях UDP/IP и InfiniBand.


### Задание 3

Соберал модель, состоящую из двух виртуальных машин. Установил Pacemaker, Corosync, Pcs. Настроил HA кластер.

1. `Выполнил все этапы по заданию`

![pcs_status_&_pcs_cluster_status_node1.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/pcs_status_%26_pcs_cluster_status_node1.png)`

![pcs_status_&_pcs_cluster_status_node2.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/pcs_status_%26_pcs_cluster_status_node2.png)`

![Corosync.conf_node1.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/Corosync.conf_node1.png)`

![Corosync.conf_node2.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/Corosync.conf_node2.png)`

![Pacemaker_web_node1.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/Pacemaker_web_node1.png)`

![Pacemaker_web_node2.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/Pacemaker_web_node2.png)`

![Apache2-clone.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/Apache2-clone.png)`

![MysqlDate_&_WebDate-clone.png](https://github.com/oleghamov/Pacemaker-10-03-14-05-23-hw-/blob/master/MysqlDate_%26_WebDate-clone.png)`



















